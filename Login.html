<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
<style>
    .hidden{
        display: none;
    }
</style>
</head>
<body>
         <div id="login-page">
            <h1>Login</h1>
            <form onsubmit="login(event)">
                <label for="username">Email:</label>
                <input type="text" id="username" required><br><br>
                <label for="password">Password:</label>
                <input type="password" id="password" required><br><br>
                <button type="submit">Login</button>
                <button type="button" onclick="showRegister()">Register</button>
            </form>
        </div>
    
        <div id="register-page" class="hidden">
            <h1>Register</h1>
            <form onsubmit="register(event)">
                <label for="new-username">Email:</label>
                <input type="text" id="new-username" required><br><br>
                <label for="new-password">Paaword:</label>
                <input type="password" id="new-password" required><br><br>
                <button type="submit">Register</button>
                <button type="button" onclick="showLogin()">Back to login page</button>
            </form>
        </div>
    
        <div id="main-page" class="hidden">
            <h1>Health and Fitness tracking app</h1>
            <button onclick="logout()">Log out</button>
   <script>
    // finished

        let users = JSON.parse(localStorage.getItem('users')) || {};
        let currentUser = null;

        const loginPage = document.getElementById('login-page');
        const registerPage = document.getElementById('register-page');
        const mainPage = document.getElementById('main-page');

        function showLogin() {
            loginPage.style.display = 'block';
            registerPage.style.display = 'none';
            mainPage.style.display = 'none';
        }

        function showRegister() {
            loginPage.style.display = 'none';
            registerPage.style.display = 'block';
            mainPage.style.display = 'none';
        }

        function showMainPage() {
            loginPage.style.display = 'none';
            registerPage.style.display = 'none';
            mainPage.style.display = 'block';
        }

        function login(event) {
            event.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            if (users[username] && users[username].password === password) {
                currentUser = username;
                showMainPage();
            } else {
                alert('Email or Password is incorrect!');
            }
        }

        function register(event) {
            event.preventDefault();
            const username = document.getElementById('new-username').value;
            const password = document.getElementById('new-password').value;

            if (users[username]) {
                alert('Accout is existed!');
            } else {
                users[username] = {
                    password: password,
                    }
                };
                localStorage.setItem('users', JSON.stringify(users));
                alert('Successful registerÔºÅ');
                showLogin();
            }

            function logout() {
            currentUser = null;
            showLogin();
        }
    
            window.onload = showLogin;
            window.onload = function(){
                showLogin();
                showMainPage();
                showRegister();
                register();
                login();
            }
   </script>
</body>
</html>